{% load static %} 
<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <link href="{% static 'css/Registration.css' %}" rel="stylesheet"/>
  <link href="{% static 'img/Logo.webp' %}" rel="shortcut icon"/>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet"/>
  <title>
   –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  </title>
 </head>
 <body>
  {% comment %} <header class="menu">
   <a href="{% url 'index' %}">
    <img class="GoToMain" src="{% static 'img/Logo.webp' %}"/>
   </a>
   <div class="container-fluid">
    <div class="col badcol Panel">
     <div class="row badrow BeforeKnopka">
      <div class="col MenuTable">
       <a class="GoToMenu" href="{% url 'menu' %}">
        –ú–µ–Ω—é
       </a>
       <a class="GoToTeam" href="{% url 'contacts' %}">
        –û –∫–æ–º–∞–Ω–¥–µ
       </a>
       <a class="GoToPosts" href="{% url 'all_posts' %}">
        –ü–æ—Å—Ç—ã
       </a>
       <a href="{% url 'my_posts' %}">
        –ú–æ–∏ –æ—Ç–∑—ã–≤—ã
       </a>
      </div>
     </div>
     <div class="button-container">
      <button id="loginButton">
       –í—Ö–æ–¥
      </button>
      <a class="hidden" href="{% url 'profile' %}" id="profile-button">
       <img alt="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" class="ImgIcon" src="{% static 'img/–ò–∫–æ–Ω–∫–∞–ê–≤–∞—Ç–∞—Ä–∞.png' %}">
       </img>
      </a>
      <button class="hidden" href="#" id="logoutButton">
       –í—ã–π—Ç–∏
      </button>
     </div>
     <div class="overlay" id="overlay">
     </div>
     <div class="form-container-authorization" id="loginForm">
      <form action="{% url 'login' %}" class="loginFormContent" method="POST">
       <div class="text-center">
        <label for="Email" style="color: white;">
         –õ–æ–≥–∏–Ω
        </label>
        <br/>
        <input id="Email" name="username" style="width: 100%;" type="Email"/>
        <!-- required pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$"-->
        <br/>
        <br/>
        <label for="Password" style="color: white;">
         –ü–∞—Ä–æ–ª—å
        </label>
        <br/>
        <input id="Password" name="password" style="width: 100%;" type="Password"/>
        <!-- required
                            gpattern="^(?=.*[a-zA-Z])(?=.*\d)(?=.*_).{8,}$"
                            title="–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –±—É–∫–≤—É, –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É –∏ ( _ ), –∏ –∏–º–µ—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤."> -->
        <br/>
        <br/>
        <button class="BigButton" type="submit">
         –í–æ–π—Ç–∏
        </button>
       </div>
       <div class="row BottomText badrow">
        <div class="col-6 TextSleva">
         <p>
          –ù–µ—Ç –ê–∫–∫–∞—É–Ω—Ç–∞?
         </p>
         <a class="WithoutUnderline" href="{% url 'registration' %}">
          –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
         </a>
        </div>
        <div class="col-6 TextSprava">
         <p>
          –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
         </p>
         <a class="WithoutUnderline" href="{% url 'reset_password' %}">
          –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
         </a>
        </div>
       </div>
      </form>
      <script>
       const loginButton = document.getElementById('loginButton');
                const overlay = document.getElementById('overlay');
                const formContainer = document.getElementById('loginForm');
                const passwordInput = document.getElementById('Password');
                const submitButton = document.getElementById('submitButton');
                const form = document.getElementById('loginFormContent');
                const errorMessage2 = document.getElementById('errorMessage2');
        
                loginButton.addEventListener('click', function() {
                    overlay.classList.toggle('active');
                    formContainer.classList.toggle('active');
                });
        
                overlay.addEventListener('click', function() {
                  overlay.classList.remove('active');
                  formContainer.classList.remove('active');
                });
      </script>
     </div>
     <div class="dropdown Knopka">
      <a aria-expanded="false" class="btn dropdown-toggle" data-bs-toggle="dropdown" id="dropdownMenuLink" role="button">
       <img class="MenuKnopka" src="{% static 'img/–ö–Ω–æ–ø–∫–∞.png' %}"/>
      </a>
      <ul aria-labelledby="dropdownMenuLink" class="dropdown-menu text-center">
       <li>
        <a class="GoToMenu" href="{% url 'menu' %}">
         –ú–µ–Ω—é
        </a>
       </li>
       <hr/>
       <li>
        <a class="GoToTeam" href="{% url 'contacts' %}">
         –û –∫–æ–º–∞–Ω–¥–µ
        </a>
       </li>
       <hr/>
       <li>
        <a class="GoToPosts" href="{% url 'all_posts' %}">
         –ü–æ—Å—Ç—ã
        </a>
       </li>
       <hr/>
       <li>
        <a class="GoToSelfPosts" href="{% url 'my_posts' %}">
         –ú–æ–∏ –æ—Ç–∑—ã–≤—ã
        </a>
       </li>
      </ul>
     </div>
    </div>
   </div>
  </header> {% endcomment %}
  {% include "menubar.html" %}
  <form class="FormContainer" method="POST">
    {% csrf_token %}
   <h1 class="text-center">
    –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
   </h1>
   {% include "forms_errors.html" %}
   <div class="row text-center justify-content-center">
    <div class="col-6">
     <div class="row" style="position: relative;">
      <label class="FontLabel ForLabel" for="username">
       –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–æ–≥–∏–Ω)
      </label>
      <input class="WhyPadding" id="username" name="username" value="{{form.username.value|default:''}}" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" required="" type="text"/>
      <p id="message2">
      </p>
      <script>
       const usernameInput = document.getElementById('username');
                        const messageElement2 = document.getElementById('message2');

                      let timeoutId2 = null; // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Ç–∞–π–º–µ—Ä–∞

                      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                      function hideMessageAfterDelay(messageElement2, delay) {
                          // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                          if (timeoutId2) {
                              clearTimeout(timeoutId2);
                          }

                          // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
                          timeoutId2 = setTimeout(() => {
                              messageElement2.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                              timeoutId2 = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞
                          }, delay); // –£–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                      }

                      // –ó–∞–ø—Ä–µ—Ç –≤–≤–æ–¥–∞ –ø—Ä–æ–±–µ–ª–æ–≤
                      usernameInput.addEventListener('keydown', function(event) {
                          if (event.key === ' ') { // –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç –ø—Ä–æ–±–µ–ª
                              event.preventDefault(); // –ó–∞–ø—Ä–µ—â–∞–µ–º –≤–≤–æ–¥ –ø—Ä–æ–±–µ–ª–∞
                              messageElement2.textContent = "–û—à–∏–±–∫–∞: –ü—Ä–æ–±–µ–ª—ã –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã.";
                              messageElement2.className = "error";
                              messageElement2.style.display = 'block';
                              hideMessageAfterDelay(messageElement2, 2000);
                          }
                      });

                      function validateUsername(username) {
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
                        if (!username) {
                            messageElement2.textContent = "–û—à–∏–±–∫–∞: –õ–æ–≥–∏–Ω –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
                            messageElement2.className = "error";
                            messageElement2.style.display = 'block';
                            hideMessageAfterDelay(messageElement2, 2000);
                            return false;
                        }

                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ (–≤ –Ω–∞—á–∞–ª–µ, –≤ –∫–æ–Ω—Ü–µ –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏)
                        if (username.includes(' ')) {
                            messageElement2.textContent = "–û—à–∏–±–∫–∞: –õ–æ–≥–∏–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤.";
                            messageElement2.className = "error";
                            messageElement2.style.display = 'block';
                            hideMessageAfterDelay(messageElement2, 2000);
                            return false;
                        }

                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –±—É–∫–≤, —Ü–∏—Ñ—Ä –∏ "_"
                        const regex = /^[a-zA-Z0-9_]+$/;
                        if (!regex.test(username)) {
                            messageElement2.textContent = "–û—à–∏–±–∫–∞: –õ–æ–≥–∏–Ω –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –∑–Ω–∞–∫ '_'.";
                            messageElement2.className = "error";
                            messageElement2.style.display = 'block';
                            hideMessageAfterDelay(messageElement2, 2000);
                            return false;
                        }

                        // –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
                        messageElement2.textContent = "–õ–æ–≥–∏–Ω –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω!";
                        messageElement2.className = "success";
                        messageElement2.style.display = 'block';
                        hideMessageAfterDelay(messageElement2, 2000);
                        return true;
                    }

                    usernameInput.addEventListener('input', function() {
                        validateUsername(usernameInput.value);
                    });
      </script>
     </div>
    </div>
    <div class="col-6">
     <div class="row align-items-center">
      <div class="col">
       <p class="Myp FontLabel ForLabel">
        –ü–æ–ª
       </p>
      </div>
      <div class="col">
       <div class="col">
        <input class="WhyPadding" id="Gender" name="gender" value="M" type="radio"/>
        <label class="FontLabel ForLabel" for="Gender">
         –ú—É–∂
        </label>
       </div>
       <div class="col">
        <input class="WhyPadding" id="Gender" name="gender" value="F" type="radio"/>
        <label class="FontLabel ForLabel" for="Gender">
         –ñ–µ–Ω
        </label>
       </div>
      </div>
     </div>
    </div>
    <div class="col-6">
     <div class="row" style="position: relative;">
      <label class="FontLabel ForLabel" for="email">
       Email
      </label>
      <input class="WhyPadding" id="email" name="email" value="{{form.email.value|default:''}}" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email" required="" type="email"/>
      <p id="message">
      </p>
      <script>
       const emailInput = document.getElementById('email');
                      const messageElement = document.getElementById('message');

                      let timeoutId = null; // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Ç–∞–π–º–µ—Ä–∞

                      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                      function hideMessageAfterDelay(messageElement, delay) {
                          // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä, –µ—Å–ª–∏ –æ–Ω —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                          if (timeoutId) {
                              clearTimeout(timeoutId);
                          }

                          // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä
                          timeoutId = setTimeout(() => {
                              messageElement.style.display = 'none'; // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
                              timeoutId = null; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∞–π–º–µ—Ä–∞
                          }, delay); // –£–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
                      }

                      // –ó–∞–ø—Ä–µ—Ç –≤–≤–æ–¥–∞ –ø—Ä–æ–±–µ–ª–æ–≤
                      emailInput.addEventListener('keydown', function(event) {
                          if (event.key === ' ') { // –ï—Å–ª–∏ –Ω–∞–∂–∞—Ç –ø—Ä–æ–±–µ–ª
                              event.preventDefault(); // –ó–∞–ø—Ä–µ—â–∞–µ–º –≤–≤–æ–¥ –ø—Ä–æ–±–µ–ª–∞
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –ü—Ä–æ–±–µ–ª—ã –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                          }
                      });

                      emailInput.addEventListener('input', function() {
                          const email = emailInput.value; // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è

                          // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
                          messageElement.textContent = '';
                          messageElement.className = '';
                          messageElement.style.display = 'none';

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ—Ç—É
                          if (!email) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: Email –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞ "@"
                          const atSymbolCount = (email.match(/@/g) || []).length;
                          if (atSymbolCount !== 1) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: Email –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–æ–≤–Ω–æ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª '@'.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –†–∞–∑–¥–µ–ª—è–µ–º email –Ω–∞ —á–∞—Å—Ç–∏ –¥–æ –∏ –ø–æ—Å–ª–µ "@"
                          const [localPart, domainPart] = email.split('@');

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–µ—Ä–µ–¥ "@" –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª
                          if (!localPart || localPart.length === 0) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –ü–µ—Ä–µ–¥ '@' –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–ª–µ–≤–∞ –æ—Ç "@" –Ω–µ—Ç —Ç–æ—á–∫–∏ –Ω–∞ –ª—é–±–æ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏
                          if (localPart.includes('.')) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –°–ª–µ–≤–∞ –æ—Ç '@' –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–æ—á–∫–∏.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ (–ø–æ—Å–ª–µ "@")
                          if (!domainPart || !domainPart.includes('.')) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –¥–æ–º–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'gmail.com').";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ—Å–ª–µ "@" –Ω–µ –∏–¥—ë—Ç —Å—Ä–∞–∑—É —Ç–æ—á–∫–∞
                          if (domainPart.startsWith('.')) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –ü–æ—Å–ª–µ '@' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ—á–∫–∏.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤ –¥–æ–º–µ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ –Ω–µ—Ç –¥–≤—É—Ö —Ç–æ—á–µ–∫ –ø–æ–¥—Ä—è–¥
                          if (domainPart.includes('..')) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –î–≤–µ —Ç–æ—á–∫–∏ –ø–æ–¥—Ä—è–¥ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–∏ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞
                          const domainParts = domainPart.split('.');
                          if (domainParts.length < 2 || domainParts[domainParts.length - 1].length < 2) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: –ü–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ö–æ—Ç—è –±—ã –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –±—É–∫–≤, —Ü–∏—Ñ—Ä, "_", "@" –∏ "."
                          const regex = /^[a-zA-Z0-9_@.]+$/;
                          if (!regex.test(email)) {
                              messageElement.textContent = "–û—à–∏–±–∫–∞: Email –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, '_', '@' –∏ '.'.";
                              messageElement.className = "error";
                              messageElement.style.display = 'block';
                              hideMessageAfterDelay(messageElement, 2000);
                              return;
                          }

                          // –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã
                          messageElement.textContent = "Email –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω!";
                          messageElement.className = "success";
                          messageElement.style.display = 'block';
                          hideMessageAfterDelay(messageElement, 2000); // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                      });
      </script>
     </div>
    </div>
    <div class="col-6">
     <div class="row">
      <label class="FontLabel ForLabel" for="PhoneNumber">
       –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
      </label>
      {% comment %} <input class="WhyPadding" id="PhoneNumber" name="number" value="{{form.number.value|default:''}}" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ " type="tel"/> {% endcomment %}
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" type="text/javascript"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.js" type="text/javascript"></script>

        <input type="tel" placeholder="–í–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞" id="PhoneNumber" name="number" class="phone_mask"> 
        <script>$(".phone_mask").mask("+7(999)999-99-99");</script>
     </div>
    </div>
    <div class="col-6">
     <div class="row" id="BirthdayRow" style="position: relative;">
      <label class="FontLabel ForLabel" for="birthday">
       –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
      </label>
      <input class="WhyPadding" id="birthday" max="2025-02-17" min="1960-01-01" name="birthday" placeholder="–í–∞—à –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è" required="" type="date"/>
     </div>
    </div>
    <div class="col-6">
     <div class="row" style="position: relative;">
      <!-- –î–æ–±–∞–≤–ª—è–µ–º position: relative -->
      <p class="Myp FontLabel ForLabel">
       –ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
      </p>
      <input class="WhyPadding" list="Cities" name="city" value="{{form.city.value|default:''}}" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥" required=""/>
      <datalist id="Cities">
      </datalist>
      <p class="error" id="cityError" style="display: none; color: red; position: absolute; top: 100%; left: 0; z-index: 10; background: white; padding: 5px; border: 1px solid red; border-radius: 4px;">
       –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥ –∏–∑ —Å–ø–∏—Å–∫–∞.
      </p>
     </div>
    </div>
    <div class="col-6">
     <div class="row">
      <label class="FontLabel ForLabel" for="FavouriteFood">
       –õ—é–±–∏–º–∞—è –µ–¥–∞
      </label>
      <input class="WhyPadding" id="FavouriteFood" name="food" placeholder="–í–∞—à–∞ –ª—é–±–∏–º–∞—è –µ–¥–∞" type="text"/>
     </div>
    </div>
   </div>
   <div class="row text-center">
    <div class="col-6 LeftPadding">
     <div class="row" style="position: relative;">
      <label class="FontLabel ForLabel" for="password">
       –ü–∞—Ä–æ–ª—å
      </label>
      <div class="password-container">
       <input class="WhyPadding" id="password" name="password1" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required="" type="password"/>
       <button id="togglePassword" type="button">
        üëÅ
       </button>
      </div>
      <p class="error-message" id="password-error">
      </p>
      <script>
       document.getElementById('password').addEventListener('input', function() {
                        const password = this.value;
                        const errorMessage2 = document.getElementById('password-error');
                        const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d_]{8,}$/;
                    
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è
                        if (password.length === 0) {
                            errorMessage2.textContent = '';
                            errorMessage2.style.display = 'none';
                            this.setCustomValidity('');
                        } else if (/\s/.test(password)) {
                            errorMessage2.textContent = '–ü–∞—Ä–æ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤.';
                            errorMessage2.style.display = 'block';
                            this.setCustomValidity('–ü–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª—ã');
                        } else if (!regex.test(password)) {
                            errorMessage2.textContent = '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –±—É–∫–≤—É –∏ –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É. –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –∑–Ω–∞–∫ "_".';
                            errorMessage2.style.display = 'block';
                            this.setCustomValidity('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å');
                        } else {
                            errorMessage2.textContent = '';
                            errorMessage2.style.display = 'none';
                            this.setCustomValidity('');
                    
                        }
                      });
                  
                      // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å
                      document.getElementById('togglePassword').addEventListener('click', function() {
                          const passwordInput = document.getElementById('password');
                          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                          passwordInput.setAttribute('type', type);
                      
                          // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –∫–Ω–æ–ø–∫–∏
                          this.textContent = type === 'password' ? 'üëÅ' : 'üôà';
                      });
      </script>
     </div>
    </div>
    <div class="col-6 LeftPadding">
     <div class="row" style="position: relative;">
      <label class="FontLabel ForLabel" for="ConfirmPassword">
       –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å
      </label>
      <div class="password-container2">
       <input class="WhyPadding" id="ConfirmPassword" name="password2" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required="" type="password"/>
       <button id="togglePassword2" type="button">
        üëÅ
       </button>
      </div>
      <p class="error-message2" id="password-error2">
      </p>
      <script>
       document.getElementById('ConfirmPassword').addEventListener('input', function() {
                        const ConfirmPassword = this.value;
                        const errorMessage2 = document.getElementById('password-error2');
                        const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d_]{8,}$/;
                    
                        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–∞—Ä–æ–ª—è
                        if (ConfirmPassword.length === 0) {
                            errorMessage2.textContent = '';
                            errorMessage2.style.display = 'none';
                            this.setCustomValidity('');
                        } else if (/\s/.test(ConfirmPassword)) {
                            errorMessage2.textContent = '–ü–∞—Ä–æ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–µ–ª–æ–≤.';
                            errorMessage2.style.display = 'block';
                            this.setCustomValidity('–ü–∞—Ä–æ–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–µ–ª—ã');
                        } else if (!regex.test(ConfirmPassword)) {
                            errorMessage2.textContent = '–ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É –±—É–∫–≤—É –∏ –æ–¥–Ω—É —Ü–∏—Ñ—Ä—É. –†–∞–∑—Ä–µ—à–µ–Ω—ã —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ –∑–Ω–∞–∫ "_".';
                            errorMessage2.style.display = 'block';
                            this.setCustomValidity('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–∞—Ä–æ–ª—å');
                        } else {
                            errorMessage2.textContent = '';
                            errorMessage2.style.display = 'none';
                            this.setCustomValidity('');
                    
                        }
                      });
                  
                      // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–∞—Ä–æ–ª—å
                      document.getElementById('togglePassword2').addEventListener('click', function() {
                          const ConfirmPasswordInput = document.getElementById('ConfirmPassword');
                          const type = ConfirmPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
                          ConfirmPasswordInput.setAttribute('type', type);
                      
                          // –ú–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É –∫–Ω–æ–ø–∫–∏
                          this.textContent = type === 'password' ? 'üëÅ' : 'üôà';
                      });
      </script>
     </div>
    </div>
   </div>
   <button class="Mybtn" type="submit">
    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
   </button>
   <div class="form-footer">
    <p class="Myp">
     –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç?
     <a href="{% url 'login' %}">
      –í–æ–π—Ç–∏
     </a>
    </p>
   </div>
  </form>
  <script src="{% static 'js/register_CityDatalist.js' %}">
  </script>
 </body>
</html>
